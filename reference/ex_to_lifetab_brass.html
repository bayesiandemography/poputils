<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Turn life expectances at birth into full life tables,
using the Brass logit model. The method is simple
and is designed for simulations or for
settings with little or no data on age-specific
mortality rates. In settings where data
on age-specific mortality is available,
other methods might be more appropriate."><title>Derive Life Tables that Match Life Expectancies, using a Brass Logit Model — ex_to_lifetab_brass • poputils</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive Life Tables that Match Life Expectancies, using a Brass Logit Model — ex_to_lifetab_brass"><meta property="og:description" content="Turn life expectances at birth into full life tables,
using the Brass logit model. The method is simple
and is designed for simulations or for
settings with little or no data on age-specific
mortality rates. In settings where data
on age-specific mortality is available,
other methods might be more appropriate."><meta property="og:image" content="https://bayesiandemography.github.io/poputils/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">poputils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/poputils.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bayesiandemography/poputils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Derive Life Tables that Match Life Expectancies, using a Brass Logit Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/bayesiandemography/poputils/blob/HEAD/R/ex_to_lifetab.R" class="external-link"><code>R/ex_to_lifetab.R</code></a></small>
      <div class="d-none name"><code>ex_to_lifetab_brass.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Turn life expectances at birth into full life tables,
using the Brass logit model. The method is simple
and is designed for simulations or for
settings with little or no data on age-specific
mortality rates. In settings where data
on age-specific mortality is available,
other methods might be more appropriate.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ex_to_lifetab_brass</span><span class="op">(</span></span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">standard</span>,</span>
<span>  infant <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"constant"</span>, <span class="st">"linear"</span>, <span class="st">"CD"</span>, <span class="st">"AK"</span><span class="op">)</span>,</span>
<span>  child <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"constant"</span>, <span class="st">"linear"</span>, <span class="st">"CD"</span><span class="op">)</span>,</span>
<span>  closed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"constant"</span>, <span class="st">"linear"</span><span class="op">)</span>,</span>
<span>  open <span class="op">=</span> <span class="st">"constant"</span>,</span>
<span>  radix <span class="op">=</span> <span class="fl">1e+05</span>,</span>
<span>  suffix <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>target</dt>
<dd><p>A data frame containing a variable called
<code>"ex"</code>, and possibly others. See Details.</p></dd>


<dt>standard</dt>
<dd><p>A data frame containing variables
called <code>age</code> and <code>lx</code>, and possibly others.
See details.</p></dd>


<dt>infant, child, closed, open</dt>
<dd><p>Methods used to
calculate life expectancy. See <code><a href="lifetab.html">lifetab()</a></code> for details.</p></dd>


<dt>radix</dt>
<dd><p>Initial population for the
<code>lx</code> column in the derived life table(s).
Default is <code>100000</code>.</p></dd>


<dt>suffix</dt>
<dd><p>Optional suffix added to life table columns.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame containing one or more life tables.</p>
    </div>
    <div class="section level2">
    <h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a></h2>
    


<p>The method implemented by <code>ex_to_lifetab_brass()</code> is
based on the observation that, if populations A and B
are demographically similar, then, in many cases,</p>
<p>$$\text{logit}(l_x^{\text{B}}) \approx \alpha + \beta \text{logit}(l_x^{\text{A}})$$</p>
<p>where \(l_x\) is the "survivorship probability" quantity
from a life table. When populations are
similar, \(beta\) is often close to 1.</p>
<p>Given (i) target life expectency,
(ii) a set of \(l_x^{\text{A}}\)),
(referred to as a "standard"), and
(iii) a value for \(\beta\),
<code>ex_to_lifetab_brass()</code> finds
a value for \(\alpha\) that yields a set of
\(l_x^{\text{B}}\)) with the required life expectancy.</p>
    </div>
    <div class="section level2">
    <h2 id="target-argument"><code>target</code> argument<a class="anchor" aria-label="anchor" href="#target-argument"></a></h2>
    


<p><code>target</code> is a data frame specifying
life expectancies for each population being modelled,
and, possibly, inputs to the calculations, and
index variables. Values in <code>target</code> are not age-specific.</p><ul><li><p>A variable called <code>"ex"</code>, with life expectancy at birth
must be included in <code>target</code>.</p></li>
<li><p>A variable called <code>"beta"</code> with values
for <code>beta</code> can be included in <code>target</code>.
This variable can be an <a href="https://bayesiandemography.github.io/rvec/reference/rvec.html" class="external-link">rvec</a>.
If no <code>"beta"</code> variable is included in <code>target</code>,
then <code>ex_to_lifetab_brass()</code> assumes that
\(beta \equiv 1\).</p></li>
<li><p>A variable called <code>"sex"</code>. If the <code>infant</code>
argument to <code>ex_to_lifetab_brass()</code> is is <code>"CD"</code> or <code>"AK"</code>,
or if the <code>child</code> argument is <code>"CD"</code>,
<code>target</code> must include a <code>"sex" variable, and the labels for this variable must be interpretable by function [format_sex()]. Otherwise, the </code>"sex"` variable  is optional,
and there is no restriction on labels.</p></li>
<li><p>Other variables used to distinguish between
life expectancies, such as time, region,
or model variant.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="standard-argument"><code>standard</code> argument<a class="anchor" aria-label="anchor" href="#standard-argument"></a></h2>
    


<p><code>standard</code> is a data frame specifying
the \(l_x\) to be used with each life expectancy
in <code>ex</code>, and, optionally, values the average age
person-years lived by people who die in each group,
\(_na_x\). Values in <code>standard</code> are age-specific.</p><ul><li><p>A variable called <code>"age"</code>, with labels that
can be parsed by <code><a href="reformat_age.html">reformat_age()</a></code>.</p></li>
<li><p>A variable called <code>"lx"</code>.
Internally each set of \(l_x\) is are standardized
so that the value for age 0 equals 1.
Within each set, values must be non-increasing.
Cannot be an rvec.</p></li>
<li><p>Additional variables used to match rows in <code>standard</code>
to rows in <code>target</code>.</p></li>
</ul><p>Internally, <code>standard</code> is merged with
<code>target</code> using a left join from <code>target</code>,
on any variables that <code>target</code>
and <code>standard</code> have in common.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Brass W, Coale AJ. 1968. “Methods of analysis and estimation,”
in Brass, W,  Coale AJ, Demeny P, Heisel DF, et al. (eds).
The Demography of Tropical Africa. Princeton NJ:
Princeton University Press, pp. 88–139.</p>
<p>Moultrie TA, Timæus IM. 2013. Introduction to Model Life Tables.
In Moultrie T, Dorrington R, Hill A, Hill K, Timæus I, Zaba B.
(eds). Tools for Demographic Estimation.
Paris: International Union for the Scientific Study of Population.
<a href="https://demographicestimation.iussp.org/content/using-models-derive-life-tables-incomplete-data" class="external-link">online version</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="logit.html">logit()</a></code>, <code><a href="logit.html">invlogit()</a></code> Logit function</p></li>
<li><p><code><a href="lifetab.html">lifeexp()</a></code> Calculate life expectancy from detailed inputs</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## create new life tables based on level-1</span></span></span>
<span class="r-in"><span><span class="co">## 'West' model life tables, but with lower</span></span></span>
<span class="r-in"><span><span class="co">## life expectancy</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                     ex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">17.5</span>, <span class="fl">15.6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">standard</span> <span class="op">&lt;-</span> <span class="va">west_lifetab</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">level</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">age</span>, <span class="va">lx</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span><span class="fu">ex_to_lifetab_brass</span><span class="op">(</span>target <span class="op">=</span> <span class="va">target</span>,</span></span>
<span class="r-in"><span>                    standard <span class="op">=</span> <span class="va">standard</span>,</span></span>
<span class="r-in"><span>                    infant <span class="op">=</span> <span class="st">"CD"</span>,</span></span>
<span class="r-in"><span>                    child <span class="op">=</span> <span class="st">"CD"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    sex    age       qx      lx     dx      Lx    ex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Female 0     0.412  <span style="text-decoration: underline;">100</span>000  <span style="text-decoration: underline;">41</span>204.  <span style="text-decoration: underline;">73</span>218.  17.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Female 1-4   0.286   <span style="text-decoration: underline;">58</span>796. <span style="text-decoration: underline;">16</span>790. <span style="text-decoration: underline;">190</span>877.  28.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Female 5-9   0.079<span style="text-decoration: underline;">3</span>  <span style="text-decoration: underline;">42</span>006.  <span style="text-decoration: underline;">3</span>331. <span style="text-decoration: underline;">201</span>590.  35.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Female 10-14 0.061<span style="text-decoration: underline;">7</span>  <span style="text-decoration: underline;">38</span>675.  <span style="text-decoration: underline;">2</span>387. <span style="text-decoration: underline;">187</span>346.  33.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Female 15-19 0.079<span style="text-decoration: underline;">3</span>  <span style="text-decoration: underline;">36</span>288.  <span style="text-decoration: underline;">2</span>879. <span style="text-decoration: underline;">174</span>145.  30.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Female 20-24 0.097<span style="text-decoration: underline;">9</span>  <span style="text-decoration: underline;">33</span>409.  <span style="text-decoration: underline;">3</span>270. <span style="text-decoration: underline;">158</span>729.  27.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Female 25-29 0.109   <span style="text-decoration: underline;">30</span>139.  <span style="text-decoration: underline;">3</span>273. <span style="text-decoration: underline;">142</span>356.  25.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Female 30-34 0.122   <span style="text-decoration: underline;">26</span>866.  <span style="text-decoration: underline;">3</span>264. <span style="text-decoration: underline;">125</span>994.  23.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Female 35-39 0.131   <span style="text-decoration: underline;">23</span>602.  <span style="text-decoration: underline;">3</span>103. <span style="text-decoration: underline;">110</span>070.  21.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Female 40-44 0.138   <span style="text-decoration: underline;">20</span>499.  <span style="text-decoration: underline;">2</span>838.  <span style="text-decoration: underline;">95</span>223.  18.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Bryant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

